# Phase 5: Consolidation Strategy Evaluation Report

## 1. Executive Summary

Evaluated 5 consolidation strategies for merging duplicate color entries:

| Strategy | Mean Distance | Std | n Colors | Rank |
|----------|---------------|-----|----------|------|
| centroid_weighted | 62.82 | 18.15 | 1,369 | 1 |
| trimmed_mean | 62.91 | 18.16 | 1,369 | 2 |
| median | 62.97 | 18.17 | 1,369 | 3 |
| simple_mean | 62.99 | 18.15 | 1,369 | 4 |
| mode_region | 75.24 | 28.04 | 1,369 | 5 |

**Recommended Strategy**: centroid_weighted

## 2. Strategy Descriptions

### 2.1 Simple Mean
- Arithmetic mean of all RGB values
- **Pro**: Simple, unbiased estimator
- **Con**: Sensitive to outliers

### 2.2 Median
- Median of each RGB channel independently
- **Pro**: Robust to outliers
- **Con**: May not preserve color relationships

### 2.3 Trimmed Mean
- Mean after removing 10% extreme values (by luminance)
- **Pro**: Balances robustness and efficiency
- **Con**: May lose legitimate variation

### 2.4 Mode Region
- Mean of the most populated 20x20x20 RGB bin
- **Pro**: Represents consensus color
- **Con**: May miss nuanced colors

### 2.5 Centroid Weighted
- Inverse distance weighting from centroid
- **Pro**: Down-weights outliers automatically
- **Con**: Two-pass computation

## 3. Evaluation Methodology

### 3.1 Metric: Mean Distance to Samples
For each color, compute the average Euclidean distance in RGB space
from the consolidated point to all original samples.

Lower distance = better representation of the color distribution.

### 3.2 Outlier Robustness
Evaluated performance on high-variance colors (std > 50 in RGB space)
to assess sensitivity to outliers and noise.

## 4. Recommendations

### 4.1 For General Consolidation
- Use **centroid_weighted** for most cases
- This strategy provides the best balance of accuracy and robustness

### 4.2 For High-Variance Colors
- Consider **trimmed_mean** or **median** for colors with high variance
- These strategies better handle outliers from uncalibrated monitors

### 4.3 For Cross-Dataset Consolidation
- When combining Centore (spectrophotometer) with XKCD (RGB):
  - **Option A**: Source-prioritized (prefer Centore as ground truth)
  - **Option B**: Weighted mean (weight Centore higher)
  - **Option C**: Keep separate, document provenance

### 4.4 Weighting by Sample Count
- For merging variant spellings, weight by response count
- Higher count = more reliable estimate
- Use sqrt(count) weighting to avoid over-dominance

## 5. Trade-offs Summary

| Criterion | Best Strategy | Rationale |
|-----------|--------------|-----------|
| Accuracy (all colors) | simple_mean | Unbiased |
| Outlier robustness | trimmed_mean/median | Ignores extremes |
| Consensus color | mode_region | Most common |
| Automatic weighting | centroid_weighted | Down-weights outliers |
| Interpretability | simple_mean | Most intuitive |

---

*Generated by Phase 5: Consolidation Strategy Evaluation*